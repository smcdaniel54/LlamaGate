name: extension-doc-generator
version: 1.0.0
description: Generates comprehensive markdown documentation for extensions and modules
type: workflow
builtin: true
enabled: true

inputs:
  - id: target
    type: string
    description: Extension name or module name to document
    required: true
  - id: output_path
    type: string
    description: "Path to save generated markdown (default: docs/extensions/{target}.md)"
    required: false
  - id: format
    type: string
    description: Output format (markdown, html, json)
    required: false
  - id: include_examples
    type: boolean
    description: Include usage examples in documentation
    required: false
  - id: include_api_details
    type: boolean
    description: Include API endpoint details
    required: false

outputs:
  - id: documentation
    type: string
    description: Generated markdown documentation
  - id: file_path
    type: string
    description: Path where documentation was saved

steps:
  - uses: file.read
    id: read_manifest
    with:
      path: "../../{{target}}/manifest.yaml"
  
  - uses: llm.chat
    id: generate_documentation
    with:
      model: mistral
      prompt: |
        You are a technical documentation generator. Generate comprehensive, 
        well-formatted markdown documentation for LlamaGate extensions.
        
        Based on this manifest YAML:
        {{file_content}}
        
        Generate documentation that includes:
        - Extension overview (name, version, type, description)
        - API endpoints (execute endpoint: POST /v1/extensions/{{target}}/execute, custom endpoints if any)
        - Inputs table (name, type, required, description)
        - Outputs table (name, type, description)
        - Configuration options (if any in config section)
        - Usage examples (curl, Python SDK) if include_examples is true
        - Workflow steps (for workflow extensions)
        - Hooks (for middleware/observer extensions)
        
        Format as professional, readable markdown.
        Target extension: {{target}}
  
  - uses: file.write
    id: save_documentation
    with:
      path: "{{output_path}}"
