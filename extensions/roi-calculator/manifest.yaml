name: roi-calculator
version: 1.0.0
description: Calculates ROI metrics and financial projections
type: workflow
enabled: true

inputs:
  - id: cost_analysis
    type: object
    description: Cost analysis
    required: true
  - id: productivity_analysis
    type: object
    description: Productivity analysis
    required: true
  - id: risk_analysis
    type: object
    description: Risk analysis
    required: true
  - id: business_process_data
    type: object
    description: Business process data
    required: true

outputs:
  - id: roi_summary
    type: object
    description: Complete ROI summary with all financial metrics
  - id: assessment_state
    type: object
    description: Complete assessment state for reference

steps:
  - name: calculate_roi
    uses: llm.chat
    config:
      model: mistral
      system_prompt: |
        You are a financial ROI analyst. Calculate comprehensive ROI metrics for automation
        investments. Return structured JSON with:
        - current_operational_cost (annual)
        - estimated_savings (annual, monthly, weekly)
        - implementation_cost
        - payback_period_months
        - roi_12_month (percentage)
        - roi_24_month (percentage)
        - net_present_value (if applicable)
        - break_even_point
      user_prompt: |
        Calculate ROI for this automation project:
        
        Cost Analysis: {{inputs.cost_analysis}}
        Productivity Analysis: {{inputs.productivity_analysis}}
        Risk Analysis: {{inputs.risk_analysis}}
        Business Process: {{inputs.business_process_data}}
        
        Use these assumptions:
        - Savings rate: {{inputs.business_process_data.assumptions.savings_rate}}
        - Implementation cost: {{inputs.business_process_data.assumptions.implementation_cost}}
        
        Calculate:
        1. Current annual operational cost
        2. Estimated annual savings (current_cost × savings_rate)
        3. Monthly savings
        4. Payback period (implementation_cost / monthly_savings)
        5. 12-month ROI: ((savings_12_month - implementation_cost) / implementation_cost) × 100
        6. 24-month ROI
        7. Break-even point
        
        Return JSON with all financial metrics.
    outputs:
      roi_summary: ${steps.calculate_roi.output.content}
      assessment_state: ${steps.calculate_roi.output.assessment_state}
